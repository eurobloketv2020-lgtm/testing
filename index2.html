<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>roberto marte mateo - broker</title>
<meta name="description" content="Descubre propiedades exclusivas de lujo. roberto marte mateo, broker con experiencia en bienes raíces premium."/>
<meta name="keywords" content="bienes raices, propiedades lujo, roberto marte mateo, inmobiliaria"/>
<meta name="author" content="roberto marte mateo"/>
<link rel="canonical" href="https://robertomarte.com/" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://robertomarte.com/"/>
<meta property="og:title" content="roberto marte mateo - broker"/>
<meta property="og:description" content="Propiedades exclusivas. Experiencia y profesionalismo."/>
<meta property="og:image" content="https://blogs.portafolio.co/desde-la-red/7-aspectos-valorar-elegir-buen-broker/"/>
<meta property="og:locale" content="es_ES"/>
<meta property="og:site_name" content="roberto marte mateo Real Estate"/>

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:url" content="https://robertomarte.com/"/>
<meta name="twitter:title" content="roberto marte mateo - broker"/>
<meta name="twitter:description" content="Propiedades exclusivas de lujo."/>
<meta name="twitter:image" content="https://blogs.portafolio.co/desde-la-red/7-aspectos-valorar-elegir-buen-broker/"/>

<!-- Favicon -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='#1e3a8a'/><text x='50' y='50' text-anchor='middle' dy='0.35em' font-family='Playfair Display, serif' font-size='60' font-weight='bold' fill='white'>R</text></svg>">

<!-- Preconnect para performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.tailwindcss.com">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
<script>
tailwind.config = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        primary: "#1e3a8a",
        secondary: "#3b82f6",
        "background-light": "#f9fafb",
        "background-dark": "#3b82f6",
        "surface-light": "#FFFFFF",
        "surface-dark": "#1f2937",
      },
      fontFamily: {
        display: ["Playfair Display", "serif"],
        sans: ["Montserrat", "sans-serif"],
      }
    }
  }
};
</script>
<style>
html { scroll-behavior: smooth; }
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

.loader-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 43, 77, 0.7);
  backdrop-filter: blur(4px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.loader-spinner {
  width: 48px;
  height: 48px;
  border: 5px solid #FDFBF7;
  border-bottom-color: #1e3a8a;
  border-radius: 50%;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-active { pointer-events: none; opacity: 0.7; }
  /* Skeleton Loader */
.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  border-radius: 8px;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-text {
  height: 20px;
  margin-bottom: 10px;
}

.skeleton-title {
  height: 32px;
  width: 60%;
  margin-bottom: 16px;
}

.skeleton-card {
  height: 400px;
  border-radius: 2rem;
}

/* Fade-in suave */
.fade-in {
  animation: fadeIn 0.6s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Ocultar hasta cargar */
.hidden-until-loaded {
  opacity: 0;
  transition: opacity 0.4s ease-in;
}

.loaded {
  opacity: 1;
}
</style>
</head>
<body class="bg-background-light dark:bg-background-dark text-secondary dark:text-gray-100 font-sans transition-colors duration-300">

<div id="loadingOverlay" class="loader-overlay">
  <div class="flex flex-col items-center gap-4">
    <div class="loader-spinner"></div>
    <span class="text-white font-display italic tracking-widest">Cargando...</span>
  </div>
</div>

<nav class="fixed top-0 w-full z-50 transition-all duration-300 bg-white/80 dark:bg-background-dark/80 backdrop-blur-lg border-b border-gray-200/50 dark:border-white/10">
  <div class="px-6 py-2 flex justify-between items-center">
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-display font-bold text-lg" id="agenteInicial">R</div>
      <span class="font-display font-bold text-xl tracking-tight text-secondary dark:text-primary" id="agenteNombre">roberto marte mateo</span>
    </div>
    <a href="#" onclick="event.preventDefault(); abrirModalAdmin();" 
      class="p-3 md:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors">
      <span class="material-symbols-outlined text-2xl md:text-xl text-secondary dark:text-white">settings</span>
    </a>
  </div>
</nav>

<header class="relative w-full h-screen overflow-hidden flex items-end">
  <img alt="roberto marte mateo" class="absolute inset-0 w-full h-full object-cover object-[60%_15%] md:object-[55%_10%]" id="fotoAgente" src="https://blogs.portafolio.co/desde-la-red/7-aspectos-valorar-elegir-buen-broker/"/>
  <div class="absolute inset-0 bg-gradient-to-r from-secondary/70 from-20% via-secondary/40 to-transparent dark:from-background-dark/70 dark:from-20% dark:via-background-dark/50"></div>
  <div class="relative z-10 px-6 pb-40 md:pb-48 w-full max-w-lg">
    <span class="inline-block py-1 px-3 mb-3 rounded-full border border-primary/50 bg-primary/20 backdrop-blur-sm text-primary text-xs font-semibold tracking-wider uppercase">
      Inmobiliaria Premium
    </span>
    <h1 class="font-display text-4xl md:text-5xl font-medium text-white mb-3 md:mb-4 leading-tight">
      Soy Roberto Marte <br/><span class="text-primary italic">broker</span>
    </h1>
    <p class="text-gray-200 text-base md:text-lg mb-6 md:mb-8 font-light max-w-xs">
      Asesora Inmobiliaria Profesional
    </p>
    <div class="flex flex-col sm:flex-row gap-4">
      <a class="flex-1 bg-primary text-white text-center py-4 md:py-4 rounded-xl font-semibold text-base md:text-base shadow-lg shadow-primary/30 hover:bg-opacity-90 transition-all active:scale-95" href="#contact">
        Consulta Gratuita
      </a>
      <a onclick="irPagina('lista.html')" class="cursor-pointer flex-1 bg-white/10 text-white text-center py-4 rounded-xl font-semibold hover:bg-white/20 transition-all border border-white/20">
        Ver Propiedades
      </a>
    </div>
  </div>
</header>

<section class="py-8 md:py-12 px-6 bg-surface-light dark:bg-surface-dark/30 border-y border-gray-100 dark:border-white/5">
  <div class="grid grid-cols-3 gap-2 md:gap-4 max-w-lg mx-auto text-center divide-x divide-gray-200 dark:divide-white/10">
    <div class="flex flex-col items-center">
      <span class="text-primary font-display text-2xl md:text-3xl font-bold mb-1 hidden-until-loaded" id="totalVendido">
        <span class="skeleton skeleton-text w-20 inline-block"></span>
      </span>
      <span class="text-[10px] md:text-xs uppercase tracking-widest text-gray-500 dark:text-gray-400">Vendido</span>
    </div>
    <div class="flex flex-col items-center">
      <span class="text-primary font-display text-2xl md:text-3xl font-bold mb-1 hidden-until-loaded" id="anosExperiencia">
        <span class="skeleton skeleton-text w-12 inline-block"></span>
      </span>
      <span class="text-[10px] md:text-xs uppercase tracking-widest text-gray-500 dark:text-gray-400">Años</span>
    </div>
    <div class="flex flex-col items-center">
      <span class="text-primary font-display text-2xl md:text-3xl font-bold mb-1 hidden-until-loaded" id="clientesFelices">
        <span class="skeleton skeleton-text w-16 inline-block"></span>
      </span>
      <span class="text-[10px] md:text-xs uppercase tracking-widest text-gray-500 dark:text-gray-400">Familias Felices</span>
    </div>
  </div>
</section>

<section class="py-12 md:py-20 px-6 max-w-lg mx-auto">
  <div class="flex flex-col md:flex-row gap-6 md:gap-10 items-center">
    <div class="w-full relative">
      <h2 class="font-display text-2xl md:text-3xl text-secondary dark:text-white mb-4 md:mb-6">
        Redefiniendo el <span class="italic text-primary">estándar</span> de servicio.
      </h2>
      <p class="text-gray-600 dark:text-gray-300 leading-relaxed mb-4 md:mb-6 font-light text-sm md:text-base">
        Con más de una década de experiencia en el mercado de alta gama, no solo vendo propiedades; diseño estilos de vida a medida.
      </p>
      <div class="flex items-center gap-4">
        <div>
          <p class="font-display font-bold text-base md:text-lg text-secondary dark:text-white" id="agenteNombre2">roberto marte mateo</p>
          <p class="text-xs text-primary uppercase tracking-wider" id="agenteCargo">broker</p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-12 md:py-20 bg-gray-50 dark:bg-surface-dark border-t border-gray-200 dark:border-white/5" id="properties">
  <div class="px-6 max-w-7xl mx-auto">
    <div class="mb-8 md:mb-10 flex justify-between items-end">
      <div>
        <span class="text-primary text-xs font-bold tracking-widest uppercase mb-2 block">Portafolio</span>
        <h2 class="font-display text-2xl md:text-3xl text-secondary dark:text-white">Casos de Éxito</h2>
      </div>
      <a href="lista.html" class="text-xs md:text-sm font-semibold text-secondary dark:text-gray-300 border-b border-primary pb-0.5">Ver Todo</a>
    </div>
    <div class="overflow-x-auto md:overflow-visible no-scrollbar pb-8 flex md:grid md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 snap-x snap-mandatory md:snap-none" id="casosExito">
      <!-- Skeleton Loaders -->
      <div class="snap-center shrink-0 md:shrink w-[85vw] sm:w-[70vw] md:w-auto skeleton skeleton-card"></div>
      <div class="snap-center shrink-0 md:shrink w-[85vw] sm:w-[70vw] md:w-auto skeleton skeleton-card hidden md:block"></div>
      <div class="snap-center shrink-0 md:shrink w-[85vw] sm:w-[70vw] md:w-auto skeleton skeleton-card hidden lg:block"></div>
      <div class="snap-center shrink-0 md:shrink w-[85vw] sm:w-[70vw] md:w-auto skeleton skeleton-card hidden lg:block"></div>
    </div>
  </div>
</section>

<section class="py-12 md:py-20 px-6 max-w-7xl mx-auto">
  <h2 class="font-display text-2xl md:text-3xl text-secondary dark:text-white mb-6 md:mb-10">Propiedades Disponibles</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="propiedadesVenta">
    <!-- Skeleton Loaders -->
    <div class="skeleton skeleton-card"></div>
    <div class="skeleton skeleton-card hidden md:block"></div>
    <div class="skeleton skeleton-card hidden lg:block"></div>
    <div class="skeleton skeleton-card hidden lg:block"></div>
  </div>
</section>

<section class="py-16 md:py-24 px-6 relative overflow-hidden bg-secondary dark:bg-black" id="contact">
  <div class="absolute inset-0 opacity-10" style="background-image: repeating-linear-gradient(45deg, #1e3a8a 0, #1e3a8a 1px, transparent 0, transparent 50%); background-size: 20px 20px;"></div>
  <div class="relative z-10 max-w-lg mx-auto">
    <h2 class="font-display text-3xl md:text-4xl text-white mb-4 md:mb-6 text-center leading-tight">¿Listo para encontrar el hogar de tus sueños?</h2>
    <form id="contactForm" class="space-y-3 md:space-y-4">
      <input type="text" name="nombre" placeholder="Nombre completo" required class="w-full p-4 md:p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-300 text-base md:text-base"/>
      <input type="email" name="email" placeholder="Correo electrónico" required class="w-full p-4 md:p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-300 text-base md:text-base"/>
      <input type="tel" name="telefono" placeholder="Teléfono / WhatsApp" class="w-full p-4 md:p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-300 text-base md:text-base"/>
      <textarea name="mensaje" placeholder="¿En qué puedo ayudarte?" rows="3" required class="w-full p-4 md:p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-300 text-base md:text-base"></textarea>
      <button type="submit" class="w-full bg-primary text-white py-5 md:py-5 rounded-xl font-bold text-lg md:text-lg shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2">
        <span>Enviar Mensaje</span>
        <span class="material-symbols-outlined">arrow_forward</span>
      </button>
    </form>
  </div>
</section>

<footer class="bg-background-light dark:bg-background-dark py-10 text-center border-t border-gray-200 dark:border-white/5">
  <p class="text-xs text-gray-500 dark:text-gray-600 uppercase tracking-widest">© 2026 roberto marte mateo - Bienes Raíces</p>
</footer>

<a class="fixed bottom-6 right-6 z-50 group" href="https://wa.me/+1643251076" id="whatsappBtn" target="_blank">
  <div class="absolute inset-0 bg-green-500 rounded-full animate-ping opacity-20 group-hover:opacity-40"></div>
  <div class="relative bg-[#25D366] w-16 h-16 md:w-14 md:h-14 rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-transform active:scale-95">
    <svg class="w-9 h-9 md:w-8 md:h-8 text-white fill-current" viewBox="0 0 448 512"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-4-10.5-6.8z"/></svg>
  </div>
</a>

<div id="statusModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4">
  <div class="absolute inset-0 bg-secondary/80 backdrop-blur-sm"></div>
  <div class="relative bg-white dark:bg-surface-dark w-full max-w-sm rounded-[2rem] p-8 text-center shadow-2xl border border-primary/20 transform transition-all scale-95 opacity-0" id="modalContent">
    <div id="modalIcon" class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
      <span class="material-symbols-outlined text-primary text-5xl">check_circle</span>
    </div>
    <h3 id="modalTitle" class="font-display text-2xl font-bold text-secondary dark:text-white mb-2">¡Enviado con éxito!</h3>
    <p id="modalMessage" class="text-gray-600 dark:text-gray-400 font-light mb-8">roberto marte mateo recibirá tu mensaje en breve.</p>
    <button onclick="cerrarModal()" class="w-full bg-primary text-white py-4 rounded-xl font-bold hover:bg-opacity-90 transition-all shadow-lg shadow-primary/20">
      Entendido
    </button>
  </div>
</div>

<div id="adminAuthModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4">
  <div class="absolute inset-0 bg-secondary/80 backdrop-blur-md" onclick="cerrarModalAdmin()"></div>
  <div id="adminAuthContent" class="relative bg-white dark:bg-surface-dark w-full max-w-sm rounded-[2.5rem] p-10 text-center shadow-2xl border border-primary/20 transform transition-all scale-95 opacity-0">
    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6">
      <span class="material-symbols-outlined text-primary text-3xl">lock</span>
    </div>
    <h3 class="font-display text-2xl font-bold text-secondary dark:text-white mb-2 italic">Panel de Control</h3>
    <p class="text-gray-500 dark:text-gray-400 text-sm mb-8 font-light">Ingrese su clave de acceso exclusiva</p>
    <div class="relative mb-8">
      <input type="password" id="adminPassInput" 
             class="w-full bg-gray-50 dark:bg-white/5 border-none rounded-2xl p-4 text-center text-xl tracking-[0.5em] focus:ring-2 focus:ring-primary transition-all text-secondary dark:text-white"
             placeholder="••••"
             onkeyup="if(event.key === 'Enter') procesarAccesoAdmin()">
    </div>
    <div class="flex flex-col gap-3">
      <button onclick="procesarAccesoAdmin()" 
              class="w-full bg-primary text-white py-4 rounded-2xl font-bold shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all">
        Verificar Identidad
      </button>
      <button onclick="cerrarModalAdmin()" 
              class="w-full py-2 text-gray-400 text-xs uppercase tracking-widest font-semibold hover:text-primary transition-colors">
        Cancelar
      </button>
    </div>
  </div>
</div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbwf799bHyAJahpyLw8_pP0B4iUqkbhGgWSME-svZlI7QbgulCXYD5V7p0-v5LDWWqVm/exec';
const CACHE_TTL = 5 * 60 * 1000;

function getCachedData(key) {
  const cached = localStorage.getItem(key);
  if (!cached) return null;
  const data = JSON.parse(cached);
  const now = Date.now();
  if (now - data.timestamp > CACHE_TTL) {
    localStorage.removeItem(key);
    return null;
  }
  return data.value;
}

function setCachedData(key, value) {
  const data = { value: value, timestamp: Date.now() };
  localStorage.setItem(key, JSON.stringify(data));
}

function fetchWithCache(url, cacheKey) {
  const cached = getCachedData(cacheKey);
  if (cached) {
    return Promise.resolve({ success: true, data: cached });
  }
  return fetch(url)
    .then(r => r.json())
    .then(data => {
      if (data.success) {
        setCachedData(cacheKey, data.data);
      }
      return data;
    });
}

fetchWithCache(`${API_URL}?path=estadisticas`, 'estadisticas')
  .then(data => cargarEstadisticas(data.data));

fetchWithCache(`${API_URL}?path=propiedades/vendidas`, 'vendidas')
  .then(data => cargarCasosExito(data.data));

fetchWithCache(`${API_URL}?path=propiedades/venta`, 'venta')
  .then(data => cargarPropiedadesVenta(data.data));

fetchWithCache(`${API_URL}?path=config/agente`, 'agente')
  .then(data => cargarDatosAgente(data.data));

function cargarDatosAgente(agente) {
  const inicial = (agente.NOMBRE || 'R').charAt(0).toUpperCase();
  document.getElementById('agenteInicial').textContent = inicial;
  document.getElementById('agenteNombre').textContent = agente.NOMBRE;
  document.getElementById('agenteNombre2').textContent = agente.NOMBRE;
  document.getElementById('agenteCargo').textContent = agente.CARGO;
  if (agente.FOTO) document.getElementById('fotoAgente').src = agente.FOTO;
  
  fetch(`${API_URL}?path=whatsapp&mensaje=${encodeURIComponent('Hola, estoy interesado en una propiedad de lujo.')}`)
    .then(r => r.json())
    .then(data => {
      if (data.data.link) document.getElementById('whatsappBtn').href = data.data.link;
    });
}

function cargarEstadisticas(stats) {
  if (!stats) return;
  const totalVendido = document.getElementById('totalVendido');
  const anosExp = document.getElementById('anosExperiencia');
  const clientes = document.getElementById('clientesFelices');
  
  totalVendido.innerHTML = '$' + (stats.total_vendido/1000000).toFixed(1) + 'M';
  anosExp.innerHTML = stats.anos_experiencia;
  clientes.innerHTML = stats.clientes_felices + '+';
  
  setTimeout(() => {
    totalVendido.classList.add('loaded');
    anosExp.classList.add('loaded');
    clientes.classList.add('loaded');
  }, 100);
}

function cargarCasosExito(propiedades) {
  if (!propiedades || !propiedades.length) {
    document.getElementById('casosExito').innerHTML = '<p class="text-gray-500 px-6">No hay propiedades vendidas aún.</p>';
    return;
  }
  const container = document.getElementById('casosExito');
  container.innerHTML = propiedades.map(p => `
    <div class="snap-center shrink-0 md:shrink w-[85vw] sm:w-[70vw] md:w-auto group relative rounded-2xl overflow-hidden shadow-xl shadow-gray-200/50 dark:shadow-black/40 cursor-pointer fade-in" onclick="verDetalle(${p.id})">
      <div class="relative h-80 md:h-96">
        <img alt="${p.titulo}" loading="lazy" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" src="${p.imagen1 || 'https://via.placeholder.com/800x600'}"/>
        <div class="absolute inset-0 bg-gradient-to-t from-secondary/90 via-secondary/20 to-transparent dark:from-background-dark/95"></div>
        <div class="absolute top-8 right-6 transform -rotate-12 scale-125 z-20 pointer-events-none mix-blend-hard-light opacity-90">
          <div class="border-[5px] border-red-600/80 px-5 py-1 rounded-sm" style="border-style: dashed;">
            <span class="text-red-600/90 font-black text-3xl tracking-tighter uppercase" style="font-family: 'Montserrat', sans-serif; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">VENDIDO</span>
          </div>
        </div>
        <div class="absolute bottom-0 left-0 w-full p-4 md:p-6">
          <p class="text-primary font-display text-xl md:text-2xl mb-1 italic">${p.precioFormateado}</p>
          <h3 class="text-white text-lg md:text-xl font-medium mb-2">${p.titulo}</h3>
          <div class="flex items-center gap-3 md:gap-4 text-gray-300 text-xs md:text-sm">
            <div class="flex items-center gap-1"><span class="material-symbols-outlined text-base">bed</span> ${p.habitaciones}</div>
            <div class="flex items-center gap-1"><span class="material-symbols-outlined text-base">bathtub</span> ${p.banos}</div>
            <div class="flex items-center gap-1"><span class="material-symbols-outlined text-base">square_foot</span> ${p.metrosCuadrados}</div>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

function cargarPropiedadesVenta(props) {
  const container = document.getElementById('propiedadesVenta');
  if (!props || props.length === 0) {
    container.innerHTML = '<p class="text-center text-gray-500">No hay propiedades disponibles en este momento.</p>';
    return;
  }
  container.innerHTML = props.map(p => `
    <div class="group relative bg-white dark:bg-surface-dark rounded-[2rem] overflow-hidden shadow-lg border border-gray-100 dark:border-white/5 cursor-pointer transition-all hover:shadow-2xl fade-in" onclick="verDetalle(${p.id})">
      <div class="relative h-64 w-full overflow-hidden">
        <img alt="${p.titulo}" loading="lazy" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" src="${p.imagen1 || 'https://via.placeholder.com/800x600'}"/>
        <div class="absolute top-6 left-6 transform -rotate-12 scale-100 z-20 pointer-events-none mix-blend-multiply opacity-80">
          <div class="border-[3px] border-green-600/70 px-4 py-1 rounded-sm" style="border-style: dashed;">
            <span class="text-green-600/90 font-black text-xl tracking-tighter uppercase" style="font-family: 'Montserrat', sans-serif; text-shadow: 0.5px 0.5px 1px rgba(0,0,0,0.05);">Disponible</span>
          </div>
        </div>
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
        <div class="absolute bottom-5 left-6">
          <p class="text-white font-display font-bold text-2xl">${p.precioFormateado}</p>
        </div>
      </div>
      <div class="p-6">
        <h3 class="font-display text-xl font-bold text-secondary dark:text-white mb-2">${p.titulo}</h3>
        <div class="flex items-center gap-1.5 text-gray-500 dark:text-gray-400 text-sm">
          <span class="material-symbols-outlined text-primary text-lg">location_on</span>
          ${p.ubicacion}
        </div>
      </div>
    </div>
  `).join('');
}

function verDetalle(id) {
  document.getElementById('loadingOverlay').style.display = 'flex';
  window.location.href = `detalle.html?id=${id}`;
}

function irPagina(pagina) {
  document.getElementById('loadingOverlay').style.display = 'flex';
  window.location.href = pagina;
}

document.getElementById('contactForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const btn = this.querySelector('button[type="submit"]');
  const originalContent = btn.innerHTML;
  
  btn.innerHTML = '<div class="loader-spinner !w-6 !h-6 !border-2"></div> <span>Enviando...</span>';
  btn.classList.add('loading-active');

  const datos = {
    action: 'guardar_contacto',
    payload: {
      nombre: this.nombre.value,
      email: this.email.value,
      telefono: this.telefono.value,
      mensaje: this.mensaje.value
    }
  };

  fetch(API_URL, {
    method: 'POST',
    body: JSON.stringify(datos)
  })
  .then(r => r.json())
  .then(data => {
    mostrarModal('¡Mensaje Enviado!', 'Gracias por contactar. Me pondré en contacto contigo a la mayor brevedad posible.');
    this.reset();
    btn.innerHTML = originalContent;
    btn.classList.remove('loading-active');
  })
  .catch(error => {
    mostrarModal('Hubo un error', 'No pudimos enviar tu mensaje. Por favor, inténtalo de nuevo o usa WhatsApp.', true);
    btn.innerHTML = originalContent;
    btn.classList.remove('loading-active');
  });
});

function mostrarModal(titulo, mensaje, esError = false) {
  const modal = document.getElementById('statusModal');
  const content = document.getElementById('modalContent');
  const icon = document.getElementById('modalIcon');
  
  document.getElementById('modalTitle').textContent = titulo;
  document.getElementById('modalMessage').textContent = mensaje;
  
  if (esError) {
    icon.innerHTML = '<span class="material-symbols-outlined text-red-500 text-5xl">error</span>';
    icon.className = 'w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6';
  } else {
    icon.innerHTML = '<span class="material-symbols-outlined text-primary text-5xl">check_circle</span>';
    icon.className = 'w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6';
  }

  modal.classList.remove('hidden');
  modal.classList.add('flex');
  
  setTimeout(() => {
    content.classList.remove('scale-95', 'opacity-0');
    content.classList.add('scale-100', 'opacity-100');
  }, 10);
}

function cerrarModal() {
  const content = document.getElementById('modalContent');
  const modal = document.getElementById('statusModal');
  
  content.classList.add('scale-95', 'opacity-0');
  setTimeout(() => {
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }, 300);
}

function abrirModalAdmin() {
  const modal = document.getElementById('adminAuthModal');
  const content = document.getElementById('adminAuthContent');
  const input = document.getElementById('adminPassInput');
  
  input.value = '';
  modal.classList.remove('hidden');
  modal.classList.add('flex');
  
  setTimeout(() => {
    content.classList.remove('scale-95', 'opacity-0');
    content.classList.add('scale-100', 'opacity-100');
    input.focus();
  }, 10);
}

function cerrarModalAdmin() {
  const modal = document.getElementById('adminAuthModal');
  const content = document.getElementById('adminAuthContent');
  
  content.classList.remove('scale-100', 'opacity-100');
  content.classList.add('scale-95', 'opacity-0');
  
  setTimeout(() => {
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }, 300);
}

function procesarAccesoAdmin() {
  const pass = document.getElementById('adminPassInput').value;
  if (!pass) return;

  cerrarModalAdmin();
  const overlay = document.getElementById('loadingOverlay');
  if (overlay) overlay.style.display = 'flex';

  fetch(API_URL, {
    method: 'POST',
    body: JSON.stringify({
      action: 'verificar_admin',
      password: pass
    })
  })
  .then(r => r.json())
  .then(data => {
    if (data.success && data.data.autorizado) {
      window.location.href = 'admin.html';
    } else {
      if (overlay) overlay.style.display = 'none';
      mostrarModal('Acceso Denegado', 'La contraseña introducida es incorrecta.', true);
    }
  })
  .catch(error => {
    if (overlay) overlay.style.display = 'none';
    mostrarModal('Acceso Denegado', 'La contraseña introducida es incorrecta.', true);
  });
}

const urlParams = new URLSearchParams(window.location.search);
if (urlParams.get('scroll') === 'contact') {
  setTimeout(() => {
    const contacto = document.getElementById('contact');
    if (contacto) {
      contacto.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }, 1500);
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "RealEstateAgent",
  "name": "roberto marte mateo",
  "jobTitle": "broker",
  "image": "https://blogs.portafolio.co/desde-la-red/7-aspectos-valorar-elegir-buen-broker/",
  "telephone": "+1643251076",
  "email": "robertomartem@hotmail.com",
  "url": "https://robertomarte.com",
  "priceRange": "$$$"
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "roberto marte mateo Real Estate",
  "url": "https://robertomarte.com",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://robertomarte.com/lista.html?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
</body>

</html>
